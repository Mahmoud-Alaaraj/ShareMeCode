import{r as a,j as r}from"./bootstrap.bundle.min-BhGZzvZP.js";function P(){const[l,x]=a.useState(null),[o,b]=a.useState(""),[d,w]=a.useState("your-project-uuid"),[g,u]=a.useState(!1),[h,f]=a.useState(""),m=async()=>{const t=await(await fetch(`http://localhost:8081/projectStructure/${d}`)).json();x(t)};a.useEffect(()=>{m()},[]);const y=async e=>{b(e);try{const t=await fetch("http://localhost:8081/storage/select",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectUUID:d,path:e})});if(!t.ok)throw new Error("Failed to select file or directory");const s=await t.json();console.log("Selected:",s)}catch(t){console.error("Error selecting file:",t)}},j=async()=>{if(!h)return;let e="";if(!o)e="";else{const t=o.split("/"),s=t[t.length-1],i=(n,N)=>{for(const c of N)if(c.name===n&&c.type==="directory"||c.type==="directory"&&c.children&&i(n,c.children))return!0;return!1};if(i(s,(l==null?void 0:l.children)||[])||o.endsWith("/"))e=o.replace(/\/$/,"");else{const n=o.lastIndexOf("/");e=n!==-1?o.substring(0,n):""}}await fetch("http://localhost:8081/storage/createFile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectUUID:d,relativePath:e,fileName:h})}).then(t=>{t.status===201?(u(!1),f(""),m()):alert("Failed to create file")}).catch(t=>{console.error("Create file error:",t),alert("Error creating file")})},p=(e,t="")=>{const s=`${t}${e.name}${e.type==="directory"?"/":""}`;return r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{onClick:()=>y(s),className:`cursor-pointer ${o===s?"font-bold text-blue-500":""}`,children:e.name}),e.children&&e.children.map(i=>p(i,s))]},s)};return r.jsxs("div",{className:"p-4 font-sans bg-gray-100 min-h-screen",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Project Structure"}),r.jsx("div",{className:"bg-white shadow-md rounded p-4",children:l?p(l):r.jsx("p",{className:"text-gray-500",children:"Loading structure..."})}),r.jsx("button",{onClick:()=>u(!0),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow",children:"Create File"}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white p-6 rounded shadow-md w-96",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New File"}),r.jsx("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Enter file name (e.g., index.js)",className:"w-full border border-gray-300 p-2 rounded mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded",children:"Cancel"}),r.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Create"})]})]})})]})}export{P as C};
